<ng-container *ngIf="resume; else noSelection">
  <!-- Modern card layout with pure CSS -->
  <div class="detail-header">
    <div class="header-content">
      <div class="candidate-title">
        <h1>{{ resume.candidateName }}</h1>
        <div class="contact-info">
          <span class="info-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            {{ resume.email }}
          </span>
          <span class="info-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
            </svg>
            {{ resume.phoneNumber }}
          </span>
        </div>
        <div class="location">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
          {{ resume.location }}
        </div>
        <div class="experience-badge">
            <strong>Experience:</strong> {{ resume.experienceYears }} Years
        </div>
      </div>

      <div class="score-badge" [style.background]="getScoreBg(resume.fitPercentage)">
        <span class="score-label">FIT SCORE</span>
        <span class="score-value">{{ resume.fitPercentage }}%</span>
      </div>
    </div>

    <div class="action-buttons">
      <button class="btn btn-primary" (click)="onViewPdf.emit(resume.id)">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
          <path d="M13.75 2.75H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V10.25"/>
          <path d="M13.75 2.75V9h6.5"/>
        </svg>
        View PDF
      </button>
      <button class="btn btn-danger" (click)="onDelete.emit(resume.id)">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <polyline points="3 6 5 6 21 6"></polyline>
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
        </svg>
        Delete
      </button>
    </div>
  </div>

  <div class="analysis-sections">
    <div class="analysis-card match-card">
      <div class="card-header">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9 9h.01M15 9h.01M9 15a3 3 0 0 0 6 0"></path>
        </svg>
        <h3>AI Match Explanation</h3>
      </div>
      <p>{{ resume.matchExplanation }}</p>
    </div>

    <div class="analysis-card summary-card">
      <div class="card-header">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
          <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
        </svg>
        <h3>Professional Summary</h3>
      </div>
      <p>{{ resume.professionalSummary }}</p>
    </div>

    <div class="analysis-card skills-card">
      <div class="card-header">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
          <polyline points="13 2 13 9 20 9"></polyline>
        </svg>
        <h3>Top Identified Skills</h3>
      </div>
      <div class="skills-list">
        <span *ngFor="let skill of resume.topSkills" class="skill-badge">{{ skill }}</span>
      </div>      
    </div>
  </div>
</ng-container>

<ng-template #noSelection>
  <div class="empty-state">
    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
      <circle cx="12" cy="7" r="4"></circle>
    </svg>
    <p>Select a candidate from the list to view their AI analysis</p>
  </div>
</ng-template>
